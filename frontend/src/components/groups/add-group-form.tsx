import { zodResolver } from "@hookform/resolvers/zod";
import { useForm } from "react-hook-form";
import { z } from "zod";
import { motion } from "framer-motion";
import { useState } from "react";

import { Button } from "@/components/ui/button";
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from "@/components/ui/form";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Checkbox } from "@/components/ui/checkbox";
import { CustomAvatar } from "@/components/ui/custom-avatar";
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";

const formSchema = z.object({
  name: z.string().min(2, {
    message: "Name must be at least 2 characters.",
  }),
  description: z.string().optional(),
});

// Mock data for all available members
const allMembers = [
  { id: 1, name: "John Doe", email: "john@example.com", icon: "ğŸ‘¨" },
  { id: 2, name: "Jane Smith", email: "jane@example.com", icon: "ğŸ‘©" },
  { id: 3, name: "Mike Johnson", email: "mike@example.com", icon: "ğŸ‘¨" },
  { id: 4, name: "Sarah Williams", email: "sarah@example.com", icon: "ğŸ‘©" },
  { id: 5, name: "David Brown", email: "david@example.com", icon: "ğŸ‘¨" },
  { id: 6, name: "Emily Davis", email: "emily@example.com", icon: "ğŸ‘©" },
];

// Mock data for icons
const icons = [
  "ğŸ ",
  "ğŸ¢",
  "ğŸ«",
  "ğŸ¨",
  "ğŸª",
  "ğŸ­",
  "ğŸ°",
  "â›ª",
  "ğŸ›ï¸",
  "ğŸ—ï¸",
  "ğŸ˜ï¸",
  "ğŸ™ï¸",
  "ğŸšï¸",
  "ğŸï¸",
  "ğŸï¸",
  "ğŸŸï¸",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ£",
  "ğŸ¤",
  "ğŸ¥",
  "ğŸ¦",
  "ğŸ§",
  "ğŸ¨",
  "ğŸ©",
  "ğŸª",
  "ğŸ«",
  "ğŸ¬",
  "ğŸ­",
  "ğŸ®",
  "ğŸ¯",
  "ğŸ°",
  "ğŸ’’",
  "ğŸ—¼",
  "ğŸ—½",
  "â›ª",
  "ğŸ•Œ",
  "ğŸ•",
  "â›©ï¸",
  "ğŸ•‹",
  "â›²",
  "â›º",
  "ğŸŒ",
  "ğŸŒƒ",
  "ğŸŒ„",
  "ğŸŒ…",
  "ğŸŒ†",
  "ğŸŒ‡",
  "ğŸŒ‰",
  "â™¨ï¸",
  "ğŸŒŒ",
  "ğŸ ",
  "ğŸ¡",
  "ğŸ¢",
  "ğŸ’ˆ",
  "ğŸª",
  "ğŸ­",
  "ğŸ–¼ï¸",
  "ğŸ¨",
  "ğŸ°",
  "ğŸš‚",
  "ğŸšƒ",
  "ğŸš„",
  "ğŸš…",
  "ğŸš†",
  "ğŸš‡",
  "ğŸšˆ",
  "ğŸš‰",
  "ğŸšŠ",
  "ğŸš",
  "ğŸš",
  "ğŸš‹",
  "ğŸšŒ",
  "ğŸš",
  "ğŸš",
  "ğŸš",
  "ğŸš‘",
  "ğŸš’",
  "ğŸš“",
  "ğŸš”",
  "ğŸš•",
  "ğŸš–",
  "ğŸš—",
  "ğŸš˜",
  "ğŸš™",
  "ğŸšš",
  "ğŸš›",
  "ğŸšœ",
  "ğŸš²",
  "ğŸ›´",
  "ğŸ›µ",
  "ğŸš",
  "ğŸ›£ï¸",
  "ğŸ›¤ï¸",
  "â›½",
  "ğŸš¨",
  "ğŸš¥",
  "ğŸš¦",
  "ğŸš§",
  "ğŸ›‘",
  "âš“",
  "â›µ",
  "ğŸ›¶",
  "ğŸš¤",
  "ğŸ›³ï¸",
  "â›´ï¸",
  "ğŸ›¥ï¸",
  "ğŸš¢",
  "âœˆï¸",
  "ğŸ›©ï¸",
  "ğŸ›«",
  "ğŸ›¬",
  "ğŸ’º",
  "ğŸš",
  "ğŸšŸ",
  "ğŸš ",
  "ğŸš¡",
  "ğŸ›°ï¸",
  "ğŸš€",
  "ğŸ›¸",
  "ğŸ›ï¸",
  "ğŸšª",
  "ğŸ›ï¸",
  "ğŸ›‹ï¸",
  "ğŸš½",
  "ğŸš¿",
  "ğŸ›",
  "âŒ›",
  "â³",
  "âŒš",
  "â°",
  "â±ï¸",
  "â²ï¸",
  "ğŸ•°ï¸",
  "ğŸ•›",
  "ğŸ•§",
  "ğŸ•",
  "ğŸ•œ",
  "ğŸ•‘",
  "ğŸ•",
  "ğŸ•’",
  "ğŸ•",
  "ğŸ•“",
  "ğŸ•Ÿ",
  "ğŸ•”",
  "ğŸ• ",
  "ğŸ••",
  "ğŸ•¡",
  "ğŸ•–",
  "ğŸ•¢",
  "ğŸ•—",
  "ğŸ•£",
  "ğŸ•˜",
  "ğŸ•¤",
  "ğŸ•™",
  "ğŸ•¥",
  "ğŸ•š",
  "ğŸ•¦",
  "ğŸŒ‘",
  "ğŸŒ’",
  "ğŸŒ“",
  "ğŸŒ”",
  "ğŸŒ•",
  "ğŸŒ–",
  "ğŸŒ—",
  "ğŸŒ˜",
  "ğŸŒ™",
  "ğŸŒš",
  "ğŸŒ›",
  "ğŸŒœ",
  "ğŸŒ¡ï¸",
  "â˜€ï¸",
  "ğŸŒ",
  "ğŸŒ",
  "â­",
  "ğŸŒŸ",
  "ğŸŒ ",
  "ğŸŒŒ",
  "â˜ï¸",
  "â›…",
  "â›ˆï¸",
  "ğŸŒ¤ï¸",
  "ğŸŒ¥ï¸",
  "ğŸŒ¦ï¸",
  "ğŸŒ§ï¸",
  "ğŸŒ¨ï¸",
  "ğŸŒ©ï¸",
  "ğŸŒªï¸",
  "ğŸŒ«ï¸",
  "ğŸŒ¬ï¸",
  "ğŸŒ€",
  "ğŸŒˆ",
  "ğŸŒ‚",
  "â˜‚ï¸",
  "â˜”",
  "â›±ï¸",
  "âš¡",
  "â„ï¸",
  "â˜ƒï¸",
  "â›„",
  "â˜„ï¸",
  "ğŸ”¥",
  "ğŸ’§",
  "ğŸŒŠ",
  "ğŸƒ",
  "ğŸ„",
  "ğŸ†",
  "ğŸ‡",
  "ğŸ§¨",
  "âœ¨",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸŠ",
  "ğŸ‹",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ",
  "ğŸ‘",
  "ğŸ§§",
  "ğŸ€",
  "ğŸ",
  "ğŸ—ï¸",
  "ğŸŸï¸",
  "ğŸ«",
  "ğŸ–ï¸",
  "ğŸ†",
  "ğŸ…",
  "ğŸ¥‡",
  "ğŸ¥ˆ",
  "ğŸ¥‰",
  "âš½",
  "âš¾",
  "ğŸ¥",
  "ğŸ€",
  "ğŸ",
  "ğŸˆ",
  "ğŸ‰",
  "ğŸ¾",
  "ğŸ¥",
  "ğŸ³",
  "ğŸ",
  "ğŸ‘",
  "ğŸ’",
  "ğŸ¥",
  "ğŸ“",
  "ğŸ¸",
  "ğŸ¥Š",
  "ğŸ¥‹",
  "ğŸ¥…",
  "â›³",
  "â›¸ï¸",
  "ğŸ£",
  "ğŸ½",
  "ğŸ¿",
  "ğŸ›·",
  "ğŸ¥Œ",
  "ğŸ¯",
  "ğŸ±",
  "ğŸ”®",
  "ğŸ§¿",
  "ğŸ®",
  "ğŸ•¹ï¸",
  "ğŸ°",
  "ğŸ²",
  "ğŸ§©",
  "ğŸ§¸",
  "â™ ï¸",
  "â™¥ï¸",
  "â™¦ï¸",
  "â™£ï¸",
  "â™Ÿï¸",
  "ğŸƒ",
  "ğŸ€„",
  "ğŸ´",
  "ğŸ­",
  "ğŸ–¼ï¸",
  "ğŸ¨",
  "ğŸ§µ",
  "ğŸ§¶",
  "ğŸ‘“",
  "ğŸ•¶ï¸",
  "ğŸ¥½",
  "ğŸ¥¼",
  "ğŸ‘”",
  "ğŸ‘•",
  "ğŸ‘–",
  "ğŸ§£",
  "ğŸ§¤",
  "ğŸ§¥",
  "ğŸ§¦",
  "ğŸ‘—",
  "ğŸ‘˜",
  "ğŸ‘™",
  "ğŸ‘š",
  "ğŸ‘›",
  "ğŸ‘œ",
  "ğŸ‘",
  "ğŸ›ï¸",
  "ğŸ’",
  "ğŸ‘",
  "ğŸ‘Ÿ",
  "ğŸ¥¾",
  "ğŸ¥¿",
  "ğŸ‘ ",
  "ğŸ‘¡",
  "ğŸ‘¢",
  "ğŸ‘‘",
  "ğŸ‘’",
  "ğŸ©",
  "ğŸ“",
  "ğŸ§¢",
  "â›‘ï¸",
  "ğŸ“¿",
  "ğŸ’„",
  "ğŸ’",
  "ğŸ’",
  "ğŸ”‡",
  "ğŸ”ˆ",
  "ğŸ”‰",
  "ğŸ”Š",
  "ğŸ“¢",
  "ğŸ“£",
  "ğŸ“¯",
  "ğŸ””",
  "ğŸ”•",
  "ğŸ¼",
  "ğŸµ",
  "ğŸ¶",
  "ğŸ™ï¸",
  "ğŸšï¸",
  "ğŸ›ï¸",
  "ğŸ¤",
  "ğŸ§",
  "ğŸ“»",
  "ğŸ·",
  "ğŸ¸",
  "ğŸ¹",
  "ğŸº",
  "ğŸ»",
  "ğŸ¥",
  "ğŸ“±",
  "ğŸ“²",
  "â˜ï¸",
  "ğŸ“",
  "ğŸ“Ÿ",
  "ğŸ“ ",
  "ğŸ”‹",
  "ğŸ”Œ",
  "ğŸ’»",
  "ğŸ–¥ï¸",
  "ğŸ–¨ï¸",
  "âŒ¨ï¸",
  "ğŸ–±ï¸",
  "ğŸ–²ï¸",
  "ğŸ’½",
  "ğŸ’¾",
  "ğŸ’¿",
  "ğŸ“€",
  "ğŸ§®",
  "ğŸ¥",
  "ğŸï¸",
  "ğŸ“½ï¸",
  "ğŸ¬",
  "ğŸ“º",
  "ğŸ“·",
  "ğŸ“¸",
  "ğŸ“¹",
  "ğŸ“¼",
  "ğŸ”",
  "ğŸ”",
  "ğŸ•¯ï¸",
  "ğŸ’¡",
  "ğŸ”¦",
  "ğŸ®",
  "ğŸ“”",
  "ğŸ“•",
  "ğŸ“–",
  "ğŸ“—",
  "ğŸ“˜",
  "ğŸ“™",
  "ğŸ“š",
  "ğŸ““",
  "ğŸ“’",
  "ğŸ“ƒ",
  "ğŸ“œ",
  "ğŸ“„",
  "ğŸ“°",
  "ğŸ—ï¸",
  "ğŸ“‘",
  "ğŸ”–",
  "ğŸ·ï¸",
  "ğŸ’°",
  "ğŸ’´",
  "ğŸ’µ",
  "ğŸ’¶",
  "ğŸ’·",
  "ğŸ’¸",
  "ğŸ’³",
  "ğŸ§¾",
  "ğŸ’¹",
  "ğŸ’±",
  "ğŸ’²",
  "âœ‰ï¸",
  "ğŸ“§",
  "ğŸ“¨",
  "ğŸ“©",
  "ğŸ“¤",
  "ğŸ“¥",
  "ğŸ“¦",
  "ğŸ“«",
  "ğŸ“ª",
  "ğŸ“¬",
  "ğŸ“­",
  "ğŸ“®",
  "ğŸ—³ï¸",
  "âœï¸",
  "âœ’ï¸",
  "ğŸ–‹ï¸",
  "ğŸ–Šï¸",
  "ğŸ–Œï¸",
  "ğŸ–ï¸",
  "ğŸ“",
  "ğŸ’¼",
  "ğŸ“",
  "ğŸ“‚",
  "ğŸ—‚ï¸",
  "ğŸ“…",
  "ğŸ“†",
  "ğŸ—’ï¸",
  "ğŸ—“ï¸",
  "ğŸ“‡",
  "ğŸ“ˆ",
  "ğŸ“‰",
  "ğŸ“Š",
  "ğŸ“‹",
  "ğŸ“Œ",
  "ğŸ“",
  "ğŸ“",
  "ğŸ–‡ï¸",
  "ğŸ“",
  "ğŸ“",
  "âœ‚ï¸",
  "ğŸ—ƒï¸",
  "ğŸ—„ï¸",
  "ğŸ—‘ï¸",
  "ğŸ”’",
  "ğŸ”“",
  "ğŸ”",
  "ğŸ”",
  "ğŸ”‘",
  "ğŸ—ï¸",
  "ğŸ”¨",
  "â›ï¸",
  "âš’ï¸",
  "ğŸ› ï¸",
  "ğŸ—¡ï¸",
  "âš”ï¸",
  "ğŸ”«",
  "ğŸ¹",
  "ğŸ›¡ï¸",
  "ğŸ”§",
  "ğŸ”©",
  "âš™ï¸",
  "ğŸ—œï¸",
  "âš–ï¸",
  "ğŸ”—",
  "â›“ï¸",
  "ğŸ§°",
  "ğŸ§²",
  "âš—ï¸",
  "ğŸ§ª",
  "ğŸ§«",
  "ğŸ§¬",
  "ğŸ”¬",
  "ğŸ”­",
  "ğŸ“¡",
  "ğŸ’‰",
  "ğŸ’Š",
  "ğŸšª",
  "ğŸ›ï¸",
  "ğŸ›‹ï¸",
  "ğŸš½",
  "ğŸš¿",
  "ğŸ›",
  "ğŸ§´",
  "ğŸ§·",
  "ğŸ§¹",
  "ğŸ§º",
  "ğŸ§»",
  "ğŸ§¼",
  "ğŸ§½",
  "ğŸ§¯",
  "ğŸ›’",
  "ğŸš¬",
  "âš°ï¸",
  "âš±ï¸",
  "ğŸ—¿",
  "ğŸ§",
  "ğŸš®",
  "ğŸš°",
  "â™¿",
  "ğŸš¹",
  "ğŸšº",
  "ğŸš»",
  "ğŸš¼",
  "ğŸš¾",
  "ğŸ›‚",
  "ğŸ›ƒ",
  "ğŸ›„",
  "ğŸ›…",
  "âš ï¸",
  "ğŸš¸",
  "â›”",
  "ğŸš«",
  "ğŸš³",
  "ğŸš­",
  "ğŸš¯",
  "ğŸš±",
  "ğŸš·",
  "ğŸ“µ",
  "ğŸ”",
  "â˜¢ï¸",
  "â˜£ï¸",
  "â¬†ï¸",
  "â†—ï¸",
  "â¡ï¸",
  "â†˜ï¸",
  "â¬‡ï¸",
  "â†™ï¸",
  "â¬…ï¸",
  "â†–ï¸",
  "â†•ï¸",
  "â†”ï¸",
  "â†©ï¸",
  "â†ªï¸",
  "â¤´ï¸",
  "â¤µï¸",
  "ğŸ”ƒ",
  "ğŸ”„",
  "ğŸ”™",
  "ğŸ”š",
  "ğŸ”›",
  "ğŸ”œ",
  "ğŸ”",
  "ğŸ›",
  "âš›ï¸",
  "ğŸ•‰ï¸",
  "âœ¡ï¸",
  "â˜¸ï¸",
  "â˜¯ï¸",
  "âœï¸",
  "â˜¦ï¸",
  "â˜ªï¸",
  "â˜®ï¸",
  "ğŸ•",
  "ğŸ”¯",
  "â™ˆ",
  "â™‰",
  "â™Š",
  "â™‹",
  "â™Œ",
  "â™",
  "â™",
  "â™",
  "â™",
  "â™‘",
  "â™’",
  "â™“",
  "â›",
  "ğŸ”€",
  "ğŸ”",
  "ğŸ”‚",
  "â–¶ï¸",
  "â©",
  "â­ï¸",
  "â¯ï¸",
  "â—€ï¸",
  "âª",
  "â®ï¸",
  "ğŸ”¼",
  "â«",
  "ğŸ”½",
  "â¬",
  "â¸ï¸",
  "â¹ï¸",
  "âºï¸",
  "âï¸",
  "ğŸ¦",
  "ğŸ”…",
  "ğŸ”†",
  "ğŸ“¶",
  "ğŸ“³",
  "ğŸ“´",
  "â™€ï¸",
  "â™‚ï¸",
  "âš•ï¸",
  "â™¾ï¸",
  "â™»ï¸",
  "âšœï¸",
  "ğŸ”±",
  "ğŸ“›",
  "ğŸ”°",
  "â­•",
  "âœ…",
  "â˜‘ï¸",
  "âœ”ï¸",
  "âœ–ï¸",
  "âŒ",
  "â",
  "â•",
  "â–",
  "â—",
  "â°",
  "â¿",
  "ã€½ï¸",
  "âœ³ï¸",
  "âœ´ï¸",
  "â‡ï¸",
  "â€¼ï¸",
  "â‰ï¸",
  "â“",
  "â”",
  "â•",
  "â—",
  "ã€°ï¸",
  "Â©ï¸",
  "Â®ï¸",
  "â„¢ï¸",
  "#ï¸âƒ£",
  "*ï¸âƒ£",
  "0ï¸âƒ£",
  "1ï¸âƒ£",
  "2ï¸âƒ£",
  "3ï¸âƒ£",
  "4ï¸âƒ£",
  "5ï¸âƒ£",
  "6ï¸âƒ£",
  "7ï¸âƒ£",
  "8ï¸âƒ£",
  "9ï¸âƒ£",
  "ğŸ”Ÿ",
  "ğŸ” ",
  "ğŸ”¡",
  "ğŸ”¢",
  "ğŸ”£",
  "ğŸ”¤",
  "ğŸ…°ï¸",
  "ğŸ†",
  "ğŸ…±ï¸",
  "ğŸ†‘",
  "ğŸ†’",
  "ğŸ†“",
  "â„¹ï¸",
  "ğŸ†”",
  "â“‚ï¸",
  "ğŸ†•",
  "ğŸ†–",
  "ğŸ…¾ï¸",
  "ğŸ†—",
  "ğŸ…¿ï¸",
  "ğŸ†˜",
  "ğŸ†™",
  "ğŸ†š",
  "ğŸˆ",
  "ğŸˆ‚ï¸",
  "ğŸˆ·ï¸",
  "ğŸˆ¶",
  "ğŸˆ¯",
  "ğŸ‰",
  "ğŸˆ¹",
  "ğŸˆš",
  "ğŸˆ²",
  "ğŸ‰‘",
  "ğŸˆ¸",
  "ğŸˆ´",
  "ğŸˆ³",
  "ãŠ—ï¸",
  "ãŠ™ï¸",
  "ğŸˆº",
  "ğŸˆµ",
  "ğŸ”´",
  "ğŸŸ ",
  "ğŸŸ¡",
  "ğŸŸ¢",
  "ğŸ”µ",
  "ğŸŸ£",
  "ğŸŸ¤",
  "âš«",
  "âšª",
  "ğŸŸ¥",
  "ğŸŸ§",
  "ğŸŸ¨",
  "ğŸŸ©",
  "ğŸŸ¦",
  "ğŸŸª",
  "ğŸŸ«",
  "â¬›",
  "â¬œ",
  "â—¼ï¸",
  "â—»ï¸",
  "â—¾",
  "â—½",
  "â–ªï¸",
  "â–«ï¸",
  "ğŸ”¶",
  "ğŸ”·",
  "ğŸ”¸",
  "ğŸ”¹",
  "ğŸ”º",
  "ğŸ”»",
  "ğŸ’ ",
  "ğŸ”˜",
  "ğŸ”³",
  "ğŸ”²",
  "ğŸ",
  "ğŸš©",
  "ğŸŒ",
  "ğŸ´",
  "ğŸ³ï¸",
  "ğŸ³ï¸â€ğŸŒˆ",
  "ğŸ´â€â˜ ï¸",
  "ğŸ‡¦ğŸ‡¨",
  "ğŸ‡¦ğŸ‡©",
  "ğŸ‡¦ğŸ‡ª",
  "ğŸ‡¦ğŸ‡«",
  "ğŸ‡¦ğŸ‡¬",
  "ğŸ‡¦ğŸ‡®",
  "ğŸ‡¦ğŸ‡±",
  "ğŸ‡¦ğŸ‡²",
  "ğŸ‡¦ğŸ‡´",
  "ğŸ‡¦ğŸ‡¶",
  "ğŸ‡¦ğŸ‡·",
  "ğŸ‡¦ğŸ‡¸",
  "ğŸ‡¦ğŸ‡¹",
  "ğŸ‡¦ğŸ‡º",
  "ğŸ‡¦ğŸ‡¼",
  "ğŸ‡¦ğŸ‡½",
  "ğŸ‡¦ğŸ‡¿",
  "ğŸ‡§ğŸ‡¦",
  "ğŸ‡§ğŸ‡§",
  "ğŸ‡§ğŸ‡©",
  "ğŸ‡§ğŸ‡ª",
  "ğŸ‡§ğŸ‡«",
  "ğŸ‡§ğŸ‡¬",
  "ğŸ‡§ğŸ‡­",
  "ğŸ‡§ğŸ‡®",
  "ğŸ‡§ğŸ‡¯",
  "ğŸ‡§ğŸ‡±",
  "ğŸ‡§ğŸ‡²",
  "ğŸ‡§ğŸ‡³",
  "ğŸ‡§ğŸ‡´",
  "ğŸ‡§ğŸ‡¶",
  "ğŸ‡§ğŸ‡·",
  "ğŸ‡§ğŸ‡¸",
  "ğŸ‡§ğŸ‡¹",
  "ğŸ‡§ğŸ‡»",
  "ğŸ‡§ğŸ‡¼",
  "ğŸ‡§ğŸ‡¾",
  "ğŸ‡§ğŸ‡¿",
  "ğŸ‡¨ğŸ‡¦",
  "ğŸ‡¨ğŸ‡¨",
  "ğŸ‡¨ğŸ‡©",
  "ğŸ‡¨ğŸ‡«",
  "ğŸ‡¨ğŸ‡¬",
  "ğŸ‡¨ğŸ‡­",
  "ğŸ‡¨ğŸ‡®",
  "ğŸ‡¨ğŸ‡°",
  "ğŸ‡¨ğŸ‡±",
  "ğŸ‡¨ğŸ‡²",
  "ğŸ‡¨ğŸ‡³",
  "ğŸ‡¨ğŸ‡´",
  "ğŸ‡¨ğŸ‡µ",
  "ğŸ‡¨ğŸ‡·",
  "ğŸ‡¨ğŸ‡º",
  "ğŸ‡¨ğŸ‡»",
  "ğŸ‡¨ğŸ‡¼",
  "ğŸ‡¨ğŸ‡½",
  "ğŸ‡¨ğŸ‡¾",
  "ğŸ‡¨ğŸ‡¿",
  "ğŸ‡©ğŸ‡ª",
  "ğŸ‡©ğŸ‡¬",
  "ğŸ‡©ğŸ‡¯",
  "ğŸ‡©ğŸ‡°",
  "ğŸ‡©ğŸ‡²",
  "ğŸ‡©ğŸ‡´",
  "ğŸ‡©ğŸ‡¿",
  "ğŸ‡ªğŸ‡¦",
  "ğŸ‡ªğŸ‡¨",
  "ğŸ‡ªğŸ‡ª",
  "ğŸ‡ªğŸ‡¬",
  "ğŸ‡ªğŸ‡­",
  "ğŸ‡ªğŸ‡·",
  "ğŸ‡ªğŸ‡¸",
  "ğŸ‡ªğŸ‡¹",
  "ğŸ‡ªğŸ‡º",
  "ğŸ‡«ğŸ‡®",
  "ğŸ‡«ğŸ‡¯",
  "ğŸ‡«ğŸ‡°",
  "ğŸ‡«ğŸ‡²",
  "ğŸ‡«ğŸ‡´",
  "ğŸ‡«ğŸ‡·",
  "ğŸ‡¬ğŸ‡¦",
  "ğŸ‡¬ğŸ‡§",
  "ğŸ‡¬ğŸ‡©",
  "ğŸ‡¬ğŸ‡ª",
  "ğŸ‡¬ğŸ‡«",
  "ğŸ‡¬ğŸ‡¬",
  "ğŸ‡¬ğŸ‡­",
  "ğŸ‡¬ğŸ‡®",
  "ğŸ‡¬ğŸ‡±",
  "ğŸ‡¬ğŸ‡²",
  "ğŸ‡¬ğŸ‡³",
  "ğŸ‡¬ğŸ‡µ",
  "ğŸ‡¬ğŸ‡¶",
  "ğŸ‡¬ğŸ‡·",
  "ğŸ‡¬ğŸ‡¸",
  "ğŸ‡¬ğŸ‡¹",
  "ğŸ‡¬ğŸ‡º",
  "ğŸ‡¬ğŸ‡¼",
  "ğŸ‡¬ğŸ‡¾",
  "ğŸ‡­ğŸ‡°",
  "ğŸ‡­ğŸ‡²",
  "ğŸ‡­ğŸ‡³",
  "ğŸ‡­ğŸ‡·",
  "ğŸ‡­ğŸ‡¹",
  "ğŸ‡­ğŸ‡º",
  "ğŸ‡®ğŸ‡¨",
  "ğŸ‡®ğŸ‡©",
  "ğŸ‡®ğŸ‡ª",
  "ğŸ‡®ğŸ‡±",
  "ğŸ‡®ğŸ‡²",
  "ğŸ‡®ğŸ‡³",
  "ğŸ‡®ğŸ‡´",
  "ğŸ‡®ğŸ‡¶",
  "ğŸ‡®ğŸ‡·",
  "ğŸ‡®ğŸ‡¸",
  "ğŸ‡®ğŸ‡¹",
  "ğŸ‡¯ğŸ‡ª",
  "ğŸ‡¯ğŸ‡²",
  "ğŸ‡¯ğŸ‡´",
  "ğŸ‡¯ğŸ‡µ",
  "ğŸ‡°ğŸ‡ª",
  "ğŸ‡°ğŸ‡¬",
  "ğŸ‡°ğŸ‡­",
  "ğŸ‡°ğŸ‡®",
  "ğŸ‡°ğŸ‡²",
  "ğŸ‡°ğŸ‡³",
  "ğŸ‡°ğŸ‡µ",
  "ğŸ‡°ğŸ‡·",
  "ğŸ‡°ğŸ‡¼",
  "ğŸ‡°ğŸ‡¾",
  "ğŸ‡°ğŸ‡¿",
  "ğŸ‡±ğŸ‡¦",
  "ğŸ‡±ğŸ‡§",
  "ğŸ‡±ğŸ‡¨",
  "ğŸ‡±ğŸ‡®",
  "ğŸ‡±ğŸ‡°",
  "ğŸ‡±ğŸ‡·",
  "ğŸ‡±ğŸ‡¸",
  "ğŸ‡±ğŸ‡¹",
  "ğŸ‡±ğŸ‡º",
  "ğŸ‡±ğŸ‡»",
  "ğŸ‡±ğŸ‡¾",
  "ğŸ‡²ğŸ‡¦",
  "ğŸ‡²ğŸ‡¨",
  "ğŸ‡²ğŸ‡©",
  "ğŸ‡²ğŸ‡ª",
  "ğŸ‡²ğŸ‡«",
  "ğŸ‡²ğŸ‡¬",
  "ğŸ‡²ğŸ‡­",
  "ğŸ‡²ğŸ‡°",
  "ğŸ‡²ğŸ‡±",
  "ğŸ‡²ğŸ‡²",
  "ğŸ‡²ğŸ‡³",
  "ğŸ‡²ğŸ‡´",
  "ğŸ‡²ğŸ‡µ",
  "ğŸ‡²ğŸ‡¶",
  "ğŸ‡²ğŸ‡·",
  "ğŸ‡²ğŸ‡¸",
  "ğŸ‡²ğŸ‡¹",
  "ğŸ‡²ğŸ‡º",
  "ğŸ‡²ğŸ‡»",
  "ğŸ‡²ğŸ‡¼",
  "ğŸ‡²ğŸ‡½",
  "ğŸ‡²ğŸ‡¾",
  "ğŸ‡²ğŸ‡¿",
  "ğŸ‡³ğŸ‡¦",
  "ğŸ‡³ğŸ‡¨",
  "ğŸ‡³ğŸ‡ª",
  "ğŸ‡³ğŸ‡«",
  "ğŸ‡³ğŸ‡¬",
  "ğŸ‡³ğŸ‡®",
  "ğŸ‡³ğŸ‡±",
  "ğŸ‡³ğŸ‡´",
  "ğŸ‡³ğŸ‡µ",
  "ğŸ‡³ğŸ‡·",
  "ğŸ‡³ğŸ‡º",
  "ğŸ‡³ğŸ‡¿",
  "ğŸ‡´ğŸ‡²",
  "ğŸ‡µğŸ‡¦",
  "ğŸ‡µğŸ‡ª",
  "ğŸ‡µğŸ‡«",
  "ğŸ‡µğŸ‡¬",
  "ğŸ‡µğŸ‡­",
  "ğŸ‡µğŸ‡°",
  "ğŸ‡µğŸ‡±",
  "ğŸ‡µğŸ‡²",
  "ğŸ‡µğŸ‡³",
  "ğŸ‡µğŸ‡·",
  "ğŸ‡µğŸ‡¸",
  "ğŸ‡µğŸ‡¹",
  "ğŸ‡µğŸ‡¼",
  "ğŸ‡µğŸ‡¾",
  "ğŸ‡¶ğŸ‡¦",
  "ğŸ‡·ğŸ‡ª",
  "ğŸ‡·ğŸ‡´",
  "ğŸ‡·ğŸ‡¸",
  "ğŸ‡·ğŸ‡º",
  "ğŸ‡·ğŸ‡¼",
  "ğŸ‡¸ğŸ‡¦",
  "ğŸ‡¸ğŸ‡§",
  "ğŸ‡¸ğŸ‡¨",
  "ğŸ‡¸ğŸ‡©",
  "ğŸ‡¸ğŸ‡ª",
  "ğŸ‡¸ğŸ‡¬",
  "ğŸ‡¸ğŸ‡­",
  "ğŸ‡¸ğŸ‡®",
  "ğŸ‡¸ğŸ‡¯",
  "ğŸ‡¸ğŸ‡°",
  "ğŸ‡¸ğŸ‡±",
  "ğŸ‡¸ğŸ‡²",
  "ğŸ‡¸ğŸ‡³",
  "ğŸ‡¸ğŸ‡´",
  "ğŸ‡¸ğŸ‡·",
  "ğŸ‡¸ğŸ‡¸",
  "ğŸ‡¸ğŸ‡¹",
  "ğŸ‡¸ğŸ‡»",
  "ğŸ‡¸ğŸ‡½",
  "ğŸ‡¸ğŸ‡¾",
  "ğŸ‡¸ğŸ‡¿",
  "ğŸ‡¹ğŸ‡¦",
  "ğŸ‡¹ğŸ‡¨",
  "ğŸ‡¹ğŸ‡©",
  "ğŸ‡¹ğŸ‡«",
  "ğŸ‡¹ğŸ‡¬",
  "ğŸ‡¹ğŸ‡­",
  "ğŸ‡¹ğŸ‡¯",
  "ğŸ‡¹ğŸ‡°",
  "ğŸ‡¹ğŸ‡±",
  "ğŸ‡¹ğŸ‡²",
  "ğŸ‡¹ğŸ‡³",
  "ğŸ‡¹ğŸ‡´",
  "ğŸ‡¹ğŸ‡·",
  "ğŸ‡¹ğŸ‡¹",
  "ğŸ‡¹ğŸ‡»",
  "ğŸ‡¹ğŸ‡¼",
  "ğŸ‡¹ğŸ‡¿",
  "ğŸ‡ºğŸ‡¦",
  "ğŸ‡ºğŸ‡¬",
  "ğŸ‡ºğŸ‡²",
  "ğŸ‡ºğŸ‡³",
  "ğŸ‡ºğŸ‡¸",
  "ğŸ‡ºğŸ‡¾",
  "ğŸ‡ºğŸ‡¿",
  "ğŸ‡»ğŸ‡¦",
  "ğŸ‡»ğŸ‡¨",
  "ğŸ‡»ğŸ‡ª",
  "ğŸ‡»ğŸ‡¬",
  "ğŸ‡»ğŸ‡®",
  "ğŸ‡»ğŸ‡³",
  "ğŸ‡»ğŸ‡º",
  "ğŸ‡¼ğŸ‡«",
  "ğŸ‡¼ğŸ‡¸",
  "ğŸ‡½ğŸ‡°",
  "ğŸ‡¾ğŸ‡ª",
  "ğŸ‡¾ğŸ‡¹",
  "ğŸ‡¿ğŸ‡¦",
  "ğŸ‡¿ğŸ‡²",
  "ğŸ‡¿ğŸ‡¼",
  "ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿",
  "ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿",
  "ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿",
];

export function AddGroupForm() {
  const [selectedIcon, setSelectedIcon] = useState("ğŸ ");
  const [selectedMembers, setSelectedMembers] = useState<number[]>([]);
  const [showIconSelector, setShowIconSelector] = useState(false);
  const [iconSearchQuery, setIconSearchQuery] = useState("");

  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: "",
      description: "",
    },
  });

  const toggleMember = (memberId: number) => {
    setSelectedMembers((prev) =>
      prev.includes(memberId)
        ? prev.filter((id) => id !== memberId)
        : [...prev, memberId]
    );
  };

  const filteredIcons = iconSearchQuery
    ? icons.filter((icon) => icon.includes(iconSearchQuery))
    : icons;

  function onSubmit(values: z.infer<typeof formSchema>) {
    // In a real app, we would send this data to the API
    console.log({
      ...values,
      icon: selectedIcon,
      members: selectedMembers,
    });
    alert("Group added successfully!");
    form.reset();
    setSelectedMembers([]);
  }

  return (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{ duration: 0.3 }}
    >
      <Form {...form}>
        <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
          <div className="flex justify-center mb-4">
            <Dialog open={showIconSelector} onOpenChange={setShowIconSelector}>
              <DialogTrigger asChild>
                <Button variant="outline" className="w-auto">
                  <CustomAvatar icon={selectedIcon} className="h-8 w-8 mr-2" />
                  <span>Select Icon</span>
                </Button>
              </DialogTrigger>
              <DialogContent className="sm:max-w-md">
                <DialogHeader>
                  <DialogTitle>Select Icon</DialogTitle>
                </DialogHeader>
                <div className="space-y-4 py-4">
                  <Input
                    placeholder="Search icons..."
                    value={iconSearchQuery}
                    onChange={(e) => setIconSearchQuery(e.target.value)}
                  />
                  <div className="grid grid-cols-8 gap-2 max-h-[300px] overflow-y-auto">
                    {filteredIcons.map((icon, index) => (
                      <Button
                        key={index}
                        variant="outline"
                        className="h-10 w-10 p-0"
                        onClick={() => {
                          setSelectedIcon(icon);
                          setShowIconSelector(false);
                        }}
                      >
                        <span className="text-xl">{icon}</span>
                      </Button>
                    ))}
                  </div>
                </div>
              </DialogContent>
            </Dialog>
          </div>

          <FormField
            control={form.control}
            name="name"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Name</FormLabel>
                <FormControl>
                  <Input placeholder="e.g., Roommates" {...field} />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={form.control}
            name="description"
            render={({ field }) => (
              <FormItem>
                <FormLabel>Description</FormLabel>
                <FormControl>
                  <Textarea
                    placeholder="Add a description for this group..."
                    className="resize-none"
                    {...field}
                  />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          <div className="space-y-2">
            <FormLabel>Members</FormLabel>
            <div className="border rounded-md p-4 space-y-2">
              {allMembers.map((member) => (
                <div key={member.id} className="flex items-center space-x-2">
                  <Checkbox
                    id={`member-${member.id}`}
                    checked={selectedMembers.includes(member.id)}
                    onCheckedChange={() => toggleMember(member.id)}
                  />
                  <label
                    htmlFor={`member-${member.id}`}
                    className="flex items-center flex-1 cursor-pointer text-sm"
                  >
                    <CustomAvatar icon={member.icon} className="h-8 w-8 mr-2" />
                    <div>
                      <div className="font-medium">{member.name}</div>
                      <div className="text-xs text-muted-foreground">
                        {member.email}
                      </div>
                    </div>
                  </label>
                </div>
              ))}
            </div>
          </div>

          <Button type="submit" className="w-full">
            Add Group
          </Button>
        </form>
      </Form>
    </motion.div>
  );
}
